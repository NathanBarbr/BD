{% extends "base.html" %}
{% block title %}Tableau de bord{% endblock %}
{% block content %}
<h1>Tableau de bord</h1>
<p style="color:#6b7280;">Surveillez rapidement l'activité de la base et accédez aux modules de gestion.</p>
<div class="card-grid">
    <div class="card"><div class="card-title">Joueurs</div><div class="card-value">{{ stats.players }}</div></div>
    <div class="card"><div class="card-title">Clubs</div><div class="card-value">{{ stats.clubs }}</div></div>
    <div class="card"><div class="card-title">Matchs</div><div class="card-value">{{ stats.games }}</div></div>
    <div class="card"><div class="card-title">Ligues</div><div class="card-value">{{ stats.leagues }}</div></div>
</div>
<section style="margin-top:2rem;display:grid;gap:2rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));">
    <div>
        <h2>Top scoreurs récents</h2>
        <table>
            <thead><tr><th>Joueur</th><th>Match</th><th>Points totaux</th></tr></thead>
            <tbody>
            {% for entry in top_scorers %}
                <tr>
                    <td>{{ entry.player_name }}</td>
                    <td>{{ entry.game_id }} ({{ entry.game_date.strftime('%d/%m/%Y') }})</td>
                    <td>{{ entry.total_points }}</td>
                </tr>
            {% else %}
                <tr><td colspan="3">Pas de statistiques disponibles.</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <div>
        <h2>Prochains matchs</h2>
        <table>
            <thead><tr><th>Date</th><th>Type</th><th>Lieu</th></tr></thead>
            <tbody>
            {% for game in upcoming_games %}
                <tr>
                    <td>{{ game.game_date.strftime('%d/%m/%Y') }}</td>
                    <td>{{ game.game_type }}</td>
                    <td>{{ game.location }}</td>
                </tr>
            {% else %}
                <tr><td colspan="3">Aucun match planifié.</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% endblock %}

